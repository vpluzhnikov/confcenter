<?xml version="1.0" encoding="UTF-8"?>
<Catalog id="errdemonParam" version="2.0">

 <ShortDescription><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="1">errdemon Daemon</NLSCatalog></ShortDescription>

 <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="2">Starts error logging daemon (errdemon) and writes entries to the error log.</NLSCatalog></Description>

 <CfgMethod id="errdemon">
  <Get type="current">
   <Command>export LANG=C;/usr/lib/errdemon -l</Command>
   <Filter>\
    awk -F '\t' '$1 ~ /^Log File/ {print "logfile="$2}\
    $1 ~ /^Log Size/           {sub(/ +bytes$/,"",$2); print "logsize="$2}\
    $1 ~ /^Memory Buffer Size/ {sub(/ +bytes$/,"",$2); print "membuffsize="$2}\
    $1 ~ /^Duplicate Removal/  {if ($2 ~ /true/) {print "duprem=1"} else {print "duprem=0"}}\
    $1 ~ /^Duplicate Interval/ {sub(/ +milliseconds$/,"",$2); print "dupint="$2}\
    $1 ~ /^Duplicate Error Maximum/ {print "duperrmax="$2}\
    $1 ~ /^PureScale Logging/  {if ($2 ~ /off/) {print "pslog=0"} else {print "pslog=1"}}\
    $1 ~ /^PureScale Logstream/ {print "psstream="$2}'
   
   </Filter>
   <Mask name="1" value="2">(.*)=(.*)</Mask>
  </Get>
  
  <Get type="nextboot">
   <Command>export LANG=C;/usr/lib/errdemon -l</Command>
   <Filter>\
    awk -F '\t' '$1 ~ /^Log File/ {print "logfile="$2}\
    $1 ~ /^Log Size/           {sub(/ +bytes$/,"",$2); print "logsize="$2}\
    $1 ~ /^Memory Buffer Size/ {sub(/ +bytes$/,"",$2); print "membuffsize="$2}\
    $1 ~ /^Duplicate Removal/  {if ($2 ~ /true/) {print "duprem=1"} else {print "duprem=0"}}\
    $1 ~ /^Duplicate Interval/ {sub(/ +milliseconds$/,"",$2); print "dupint="$2}\
    $1 ~ /^Duplicate Error Maximum/ {print "duperrmax="$2}\
    $1 ~ /^PureScale Logging/  {if ($2 ~ /off/) {print "pslog=0"} else {print "pslog=1"}}\
    $1 ~ /^PureScale Logstream/ {print "psstream="$2}'
   
   </Filter>
   <Mask name="1" value="2">(.*)=(.*)</Mask>
  </Get>

  <Set type="permanent">
   <Command>/usr/lib/errstop;/usr/lib/errdemon%a</Command>
  </Set>
 </CfgMethod>

 <ParameterDef name="logfile" type="string" cfgmethod="errdemon" reboot="false">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="3">Uses the error log file specified by the File variable. The specified file name is saved in the error log configuration database and is immediately put into use.</NLSCatalog></Description>
  <Set type="permanent">
   <Argument> -i %v1</Argument>
  </Set>
 </ParameterDef>

 <ParameterDef name="logsize" type="integer" cfgmethod="errdemon" reboot="false">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="4">Log size in bytes</NLSCatalog></Description>
  <Set type="permanent">
   <Argument> -s %v1</Argument>
  </Set>  
 </ParameterDef>

 <ParameterDef name="membuffsize" type="integer" cfgmethod="errdemon" reboot="false">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="5">Memory buffer size in bytes</NLSCatalog></Description>
  <Set type="permanent">
   <Argument> -B %v1</Argument>
  </Set>
 </ParameterDef>

 <ParameterDef name="duprem" type="boolean" cfgmethod="errdemon" reboot="false">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="6">Duplicate Removal</NLSCatalog></Description>
  <Set type="permanent">
   <Argument>`if [ %v1 = '0' ]; then echo ' -d'; else echo ' -D'; fi`</Argument>
  </Set>
 </ParameterDef>

 <ParameterDef name="dupint" type="integer" cfgmethod="errdemon" reboot="false">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="7">Duplicate Interval in milliseconds</NLSCatalog></Description>
  <Set type="permanent">
   <Argument> -t %v1</Argument>
  </Set>  
 </ParameterDef>

 <ParameterDef name="duperrmax" type="integer" cfgmethod="errdemon">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="8">Duplicate Error Maximum</NLSCatalog></Description>
  <Set type="permanent">
   <Argument> -m %v1</Argument>
  </Set>  
 </ParameterDef>

 <ParameterDef name="pslog" type="boolean" cfgmethod="errdemon">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="9">Enablement of the pureScale error logging</NLSCatalog></Description>
 </ParameterDef>

 <ParameterDef name="psstream" type="string" cfgmethod="errdemon">
  <Description><NLSCatalog catalog="artexcat.cat" setNum="17" msgNum="10">Name of the log stream (the object that contains the centralized logs) within the pureScale service</NLSCatalog></Description>
 </ParameterDef>

</Catalog>
